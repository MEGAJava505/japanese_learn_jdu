<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JLPT N2 Practice</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <header>
            <div style="display: flex; justify-content: space-between; align-items: center;">
                <div></div>
                <div>
                    <h1>æ—¥æœ¬èªžèƒ½åŠ›è©¦é¨“ N2</h1>
                    <p>Practice Platform</p>
                </div>
                <button id="themeToggle" onclick="toggleTheme()" style="
                    background: none; 
                    border: 2px solid var(--primary-color); 
                    border-radius: 50%; 
                    width: 40px; 
                    height: 40px; 
                    cursor: pointer; 
                    font-size: 1.2em;
                    transition: all 0.3s;
                ">ðŸŒ™</button>
            </div>
        </header>

        <main>
            <section class="controls">
                <div>
                    <label for="chapterSelect">Chapter (å›ž):</label>
                    <select id="chapterSelect">
                        <!-- Generated by JS -->
                    </select>
                </div>
            </section>

            <div class="menu-grid">
                <div class="menu-card" onclick="startTestMode('goi')">
                    <h3>èªžå½™ (GOI)</h3>
                    <p>Vocabulary Only</p>
                    <p class="detail">~32 questions / chapter</p>
                </div>

                <div class="menu-card" onclick="startTestMode('bunpo_dokkai')">
                    <h3>æ–‡æ³• + èª­è§£</h3>
                    <p>Grammar & Reading</p>
                    <p class="detail">Grammar + Photo Dokkai</p>
                </div>

                <div class="menu-card" onclick="startTestMode('combined')">
                    <h3>å…¨éƒ¨ (Combined)</h3>
                    <p>Vocabulary + Grammar + Reading</p>
                    <p class="detail">Full Chapter Practice</p>
                </div>

                <div class="menu-card" onclick="startTestMode('shiken')">
                    <h3>æ¨¡æ“¬ãƒ†ã‚¹ãƒˆ (SHIKEN)</h3>
                    <p>Random Mock Test</p>
                    <p class="detail">Mixed from all chapters</p>
                </div>

                <div class="menu-card" onclick="window.location.href='shiken_dokkai.html'">
                    <h3>æ¨¡æ“¬èª­è§£ (Shiken Dokkai)</h3>
                    <p>Reading Practice</p>
                    <p class="detail">Random & Drill Books</p>
                </div>

                <div class="menu-card" style="border-color: var(--secondary-color);" onclick="startStudyModeConfig()">
                    <h3>ã‚¹ã‚¿ãƒ‡ã‚£ãƒ¢ãƒ¼ãƒ‰ (Study)</h3>
                    <p>Review with answers revealed</p>
                    <div class="toggle-container" id="studyToggles" onclick="event.stopPropagation()">
                        <!-- Toggles tailored in JS or handled in test page -->
                        <span style="font-size: 0.8rem; color: var(--text-secondary);">Customize in next step</span>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="app.js?v=1.2"></script>
    <script>
        // Simple script to populate chapters
        const chapterSelect = document.getElementById('chapterSelect');
        for (let i = 1; i <= 15; i++) {
            const option = document.createElement('option');
            option.value = i;
            option.textContent = `ç¬¬${i}å›ž`;
            chapterSelect.appendChild(option);
        }

        function startTestMode(mode) {
            const chapter = document.getElementById('chapterSelect').value;
            window.location.href = `test.html?mode=${mode}&chapter=${chapter}`;
        }

        function startStudyModeConfig() {
            const chapter = document.getElementById('chapterSelect').value;
            window.location.href = `test.html?mode=study&chapter=${chapter}`;
        }

        // Theme Toggle
        function toggleTheme() {
            const html = document.documentElement;
            const isDark = html.classList.toggle('dark-theme');
            html.classList.toggle('light-theme', !isDark);
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            updateThemeButton();
        }

        function updateThemeButton() {
            const btn = document.getElementById('themeToggle');
            const isDark = document.documentElement.classList.contains('dark-theme');
            btn.textContent = isDark ? 'â˜€ï¸' : 'ðŸŒ™';
        }

        // Apply saved theme on load
        (function initTheme() {
            const saved = localStorage.getItem('theme');
            const html = document.documentElement;
            if (saved === 'dark') {
                html.classList.add('dark-theme');
                html.classList.remove('light-theme');
            } else if (saved === 'light') {
                html.classList.add('light-theme');
                html.classList.remove('dark-theme');
            }
            updateThemeButton();
        })();
    </script>
</body>

</html>